/**
 * Dungeon Viewport/World Styles
 * AI Habitat with Matrix aesthetic
 * Expanded 3x3 world with camera system
 */

// Viewport - Fixed window that clips the world
.dungeon-viewport {
  position: fixed;
  inset: 0;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background: #0a0a0a;
  font-family: 'Courier New', monospace;
}

// World - Large container that moves with camera
.dungeon-world {
  position: absolute;
  top: 0;
  left: 0;
  width: 300vw;   // 3x viewport width
  height: 300vh;  // 3x viewport height

  // GPU-accelerated transform for smooth camera movement
  transform: translate3d(var(--camera-x, 0), var(--camera-y, 0), 0);
  will-change: transform;

  // Prevent any layout shift during transform
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/**
 * Floor Title - Engraved in the dungeon floor
 * Now positioned in world coordinates (center of 3x3 world)
 */
.floor-title {
  position: absolute;
  // Position set via [style] bindings in template (worldCenterX, worldCenterY)
  transform: translate(-50%, -50%);
  z-index: 1;
  text-align: center;
  pointer-events: none;
  user-select: none;
}

.floor-title .main-title {
  display: block;
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 900;
  letter-spacing: 0.4em;
  text-transform: uppercase;
  font-family: 'Courier New', monospace;
  // Color and text-shadow are now dynamically set via [style] bindings
  // based on character proximity to the title
  transition: color 0.3s ease-out, text-shadow 0.3s ease-out;
}

.floor-title .subtitle {
  display: block;
  font-size: clamp(0.8rem, 2vw, 1.2rem);
  font-weight: 400;
  letter-spacing: 0.6em;
  text-transform: uppercase;
  margin-top: 1rem;
  font-family: 'Courier New', monospace;
  // Color and text-shadow are now dynamically set via [style] bindings
  transition: color 0.3s ease-out, text-shadow 0.3s ease-out;
}

/**
 * Z-index hierarchy (updated for camera system):
 *
 * WORLD LAYER (moves with camera):
 * 1  - Floor title
 * 2  - Circuits background
 * 5  - Pillar system
 * 10 - Individual pillars
 * 15 - Torch system
 *
 * SCREEN LAYER (fixed to viewport):
 * 50 - Character (stays centered on screen)
 * 60 - Minimap
 * 100+ - Modals
 */

// World layer elements (inside .dungeon-world)
:host ::ng-deep {
  .dungeon-world {
    app-circuits-background {
      z-index: 2;
    }

    app-torch-system {
      z-index: 15;
    }

    app-pillar-system {
      z-index: 5;
    }
  }

  // Screen layer elements (fixed to viewport)
  app-flame-head-character {
    z-index: 50;
  }

  app-minimap {
    z-index: 60;
  }

  app-modal-service {
    z-index: 100;
  }
}

// Mobile responsive
@media (max-width: 768px) {
  .floor-title .main-title {
    letter-spacing: 0.2em;
  }

  .floor-title .subtitle {
    letter-spacing: 0.3em;
    font-size: 0.7rem;
  }
}

@media (max-width: 480px) {
  .floor-title .main-title {
    font-size: 2rem;
    letter-spacing: 0.15em;
  }

  .floor-title .subtitle {
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    margin-top: 0.5rem;
  }
}
